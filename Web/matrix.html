<!DOCTYPE html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<title>配置界面</title>
	<link rel="stylesheet" href="btswitch.css"/>
	<style>
		#matrix,#view_port {width:240px;margin:0px auto;}
		#matrix .m_led{display: inline-block;width:20px;height:20px;background-color:grey;border-radius: 20px 20px;border:5px solid lightgrey;cursor:pointer;opacity: 0.8;margin-top:-4px;}
		#matrix .m_led.on{background-color:red;opacity: 0.5;}
		#ctrl_form input[type="range"]{width:100%;}

		.btn-switch{zoom:0.5;}
		.btn-switch label::before{content:"On ";}
		.btn-switch input:checked~label::before{content:"Off";}
	</style>

	<script src="tool.js" ></script>
</head>

<body>
	<div id="view_port">
		<div id="matrix">
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
			<div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div><div class="m_led"></div>
		</div>
		<form id="ctrl_form">
			<label for="brightness">亮度：</label><input type="range" name="brightness" min="1" max="16" step="1" value="1"/>
			<div class='btn-switch'><input type='checkbox' id='switch_all'><label for='switch_all'><span></span></label></div>
		</form>
	</div>
	<script>
		$(".m_led").forEach((o,i)=>{
			o.addEventListener("click",e=>{
				let isOn = o.className.includes("on");
				let newClassName =isOn?o.className.replace(" on",""):(o.className+" on")
				o.className = newClassName;
				
				Ajax({url:"/setmatrix",data:`id=${i}&ac=${!isOn}`}).then(r=>{
					console.log(r)
				});
			});
		});
	</script>
</body>

</html>